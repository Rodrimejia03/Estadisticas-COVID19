{% extends 'administracion/base_admin.html' %}
{% block title %}- Modificar Universidad{% endblock %}
{% block content %}
<div class="w-full p-5 bg-white rounded-xl">
    <h2 class="text-black text-center font-bold text-3xl">Modificar Universidad</h2>

    <!-- Formulario para buscar la universidad que se desea modificar -->
    <form id="form_1" method="POST" class="flex flex-col items-center">
        {% csrf_token %}
        <input type="hidden" name="form_id" value="form_BuscarUni">
        <div class="mt-2 block">
            <label for="buscarUni_input">Selecciona la Universidad que deseas modificar:</label>
        </div>
        <div class="flex w-full flex-row mt-2">
            <div class="flex w-2/3 justify-end">
                <select name="buscarUni_input" required
                    class="shadow border border-black-500 w-68 rounded py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" 
                    {%if form_modificar %}
                        value="{{form_modificar.nombreU}}"
                    {%endif%}>
                    {% if unis %}
                    {% for uni in unis %}
                    <option value="{{ uni.idUniversidad }}">{{ uni.nombreU }}</option>
                    {% endfor %}
                    {% else %}
                    <option disabled>No hay elementos disponibles</option>
                    {% endif %}
                </select>
            </div>
            <div class="ml-2 flex w-1/3">
                <button type="submit" title="Buscar" name="buscar_grf_btn"
                    class=" w-20 h-min bg-cyan-500 p-2 hover:bg-cyan-700 text-white font-bold rounded-md">Buscar</button>
            </div>
        </div>
    </form>

    <!-- Formulario para modificar los datos de universidad -->
    <form id="form_2" method="POST" class="mt-10 items-center flex flex-wrap">
        {% csrf_token %}
        <input type="hidden" name="form_id" value="form_ModUni">
        <div class="flex flex-col justify-center items-end w-5/12">
            <label for="nombreU_input" class="p-2 mb-3">Nombre de la Universidad: </label>
            <label for="anio_periodo_input" class="p-2 mb-3">Año de Periodo: </label>
            <label for="inscritos_input" class="p-2 mb-3">Numero de Inscritos: </label>
            <label for="graduados_input" class="p-2 mb-3">Numero de Graduados: </label>
            <label for="desertados_input" class="p-2 mb-3">Numero de Desertados: </label>
        </div>
        <div class="flex flex-col justify-center w-6/12">
            <input {% if not form_activado %}disabled{% endif %} value="{{form_modificar.nombreU.value}}" required type="text" name="nombreU" maxlength="50"
                class="shadow appearance-none border border-black-500 rounded py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline">
            <input value="{{form_modificar.anio_periodo.value}}" required type="number" min="2019" max="2023"
                name="anio_periodo"
                class="shadow appearance-none border border-black-500 rounded py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline">
            <input value="{{form_modificar.numInscritos.value}}" required type="number" min="1" name="numInscritos"
                class="shadow appearance-none border border-black-500 rounded py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline">
            <input value="{{form_modificar.numGraduados.value}}" required type="number" min="1" name="numGraduados"
                class="shadow appearance-none border border-black-500 rounded py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline">
            <input value="{{form_modificar.numDesertados.value}}" required type="number" min="1" name="numDesertados"
                class="shadow appearance-none border border-black-500 rounded py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline">
        </div>
        <div class="flex flex-row w-full mt-3 justify-around">
            <button type="submit" title="Agregar" name="Agregar_grf_btn"
                class="bg-cyan-500 p-2 hover:bg-cyan-700 text-white font-bold rounded-md">Agregar</button>
        </div>
    </form>
    {% if messages %}
    <ul class="messages">
        {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }}</li>
            {% endfor %}
    </ul>
    {% endif %}
    <form method="post">
        {% csrf_token %}
        <button formaction="/gestionAdmin/" type="submit" title="Regresar" name="cancelar_est_btn"
            class="bg-red-600 p-2 hover:bg-red-800 text-white font-bold rounded-md">Regresar</button>
    </form>
    <!--
<script>
        var formulario1 = document.getElementById("form_1");
        var formulario2 = document.getElementById("form_2");

        // Deshabilitar el formulario 2 al cargar la página
        formulario2.style.pointerEvents = "none";
        formulario2.style.opacity = "0.5";

        // Habilitar el formulario 2 cuando se envíe el formulario 1
        formulario1.addEventListener("submit", function (event) {
            formulario2Habilitado = true;
            if(formulario2Habilitado){
            formulario2.style.pointerEvents = "auto";
            formulario2.style.opacity = "1";
            }
            else {
                event.preventDefault();
            }
        });

        // Habilitar el formulario 1 nuevamente si el formulario 2 está habilitado
        formulario2.addEventListener("submit", function (event) {
            if (formulario2Habilitado) {
                return; // Permitir el envío del formulario 2
            } else {
                event.preventDefault(); // Prevenir el envío del formulario 2 si el formulario 1 no se ha enviado aún
            }
        });
    </script>
    -->
</div>
{% endblock %}